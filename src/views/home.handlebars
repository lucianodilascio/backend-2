<h1 class="text-center">MI TIENDA</h1>

<!-- Mostrar bienvenida al usuario -->
{{#if user}}
    <h2 class="text-center">Bienvenido {{user.usuario}}!</h2>
    <p>Email: {{user.email}}</p>
    <p>Rol: {{user.role}}</p>
{{else}}
    <h2 class="text-center">¡Bienvenido, visitante!</h2>
{{/if}}

<form action="/api/sessions/logout" method="POST">
    <button type="submit">Logout</button>
</form>

<h1 class="text-center">Listado de Productos</h1>

<div class="container">
    <div class="row">
        {{#each productos}}
        <div class="col-md-4">
            <div class="card mb-4">
                <div class="card-body">
                    <h5 class="card-title">{{this.title}}</h5>
                    <p class="card-text">{{this.description}}</p>
                    <p class="card-text"><strong>Precio:</strong> ${{this.price}}</p>

                    <button class="btn btn-primary">Comprar</button>
                </div>
            </div>
        </div>
        {{/each}}
    </div>

    {{#if hasPrevPage}}
    <a href="/products?page={{prevPage}}">Anterior</a>
    {{/if}}

    <p>Página {{currentPage}} de {{totalPages}}</p>

    {{#if hasNextPage}}
    <a href="/products?page={{nextPage}}">Siguiente</a>
    {{/if}}

</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.7.2/socket.io.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="/static/js/main.js"></script>
